{% extends 'front/base.html.twig' %}

{% block title %}{{ 'project' | trans }}: {{ 'company.list' | trans }}{% endblock %}
{% block content %}
    <h1>
        <a title="{{ 'company.create' | trans }}" href="{{ path('front_create',{'entity':entity}) }}" class="btn btn-info">
            <i class="far fa-plus-square"></i>
        </a>
        {{ 'company.list' | trans }}
    </h1>
    <table class="table" data-total="{{ pagination.getTotalItemCount }}">
        <thead>
        <tr>
            <th{% if pagination.isSorted('a.name') %} class="sorted"{% endif %}>
                {{ knp_pagination_sortable(pagination, 'company.name' | trans, 'name') }}
            </th>
            <th{% if pagination.isSorted('a.name') %} class="sorted"{% endif %}>
                {{ knp_pagination_sortable(pagination, 'company.email' | trans, 'email') }}
            </th>
            <th{% if pagination.isSorted('a.name') %} class="sorted"{% endif %}>
                {{ knp_pagination_sortable(pagination, 'company.phone' | trans, 'phone') }}
            </th>
            <th{% if pagination.isSorted('a.name') %} class="sorted"{% endif %}>
                {{ knp_pagination_sortable(pagination, 'company.cif' | trans, 'cif') }}
            </th>
            <th{% if pagination.isSorted('a.name') %} class="sorted"{% endif %}>
                {{ knp_pagination_sortable(pagination, 'company.address' | trans, 'address') }}
            </th>
            <th scope="col" colspan="2"></th>
        </tr>
        </thead>
        <tbody>
        {% for element in pagination %}
        <tr class="{{ entity }}-tr">
            {% set delete =  path('front_delete',{'entity': entity, 'id': element.id}) %}
            <td>{{ element.name }}</td>
            <td>{{ element.email }}</td>
            <td>{{ element.phone }}</td>
            <td>{{ element.cif }}</td>
            <td>{{ element.address }}</td>
            <td>
                <a
                    title="{{ 'edit' | trans }} {{ element.name }}"
                    href="{{ path('front_edit',{'entity': entity, 'id': element.id}) }}"
                    class="btn btn-primary">
                    <i class="fas fa-edit edit"></i>
                </a>
                {% if is_granted('ROLE_GOD') %}
                    <a
                            href="#"
                            title="{{ 'delete' | trans }} {{ element.name }}"
                            data-href="{{ delete }}"
                            onclick="myFunction('{{ delete }}')"
                            class="btn btn-danger delete">
                        <i class="fas fa-trash edit"></i>
                    </a>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
        <tr>
            <td colspan="5">
                {{ knp_pagination_render(pagination) }}
            </td>
        </tr>
        </tbody>
    </table>
{% endblock %}